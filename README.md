# blog_api
Тестовое задание

## Требования:

Реализовать REST API для системы комментариев блога 

##### Функциональные требования:
Необходимо реализовать:
- Создание статей и разделов. (отношение многие-ко-многим) ☑
- Список всех постов ☑
- Список разделов и кол-во записей у разделов ☑
- Фильтрация по тегами ☑
- Сортировка по дате, по тэгам ☑
- Поиск по статьям ☑
- Информация о посте и комментариях к нему ☑
- Создание нового комментария авторизованным пользователям ☑

##### Нефункциональные требования:
- Должна присутствовать инструкция по развертыванию ☑
- Документация к API ☑
- При развертывании проекта необходимо заполнить БД моковыми данными ☑

## Установка:
Для запуска приложения в DockerCompose клонируем ветку docker репозитория на локальную машину:

    git clone https://github.com/Railkhayrullin/blog_api.git -b docker

Переходим в папку с проектом.

    cd blog_api

Запускаем сборку docker-compose.

    docker-compose build --no-cache

## Запуск
Запускаем docker-compose.

    docker-compose up
  
Для возможности создания комментариия необходимо авторизоваться. Будут доступны следующие аккаунты:

|   Login    |  Password  | Страница авторизации  |
| ---------- | -----------|-----------------------|
|`test_admin`|`test_admin`|`127.0.0.1:8000/admin/`|
|`test_user_1`|`test_user_1`|`127.0.0.1:8000/admin/`|
|`test_user_2`|`test_user_2`|`127.0.0.1:8000/admin/`|
|`test_user_3`|`test_user_3`|`127.0.0.1:8000/admin/`|
|`test_user_4`|`test_user_4`|`127.0.0.1:8000/admin/`|
|`test_user_5`|`test_user_5`|`127.0.0.1:8000/admin/`|

Доступны следующие endpoint-ы:

|   Страница    |  Описание   |
| ------------- | --------------------|
|`http://127.0.0.1:8000/swagger/`|Swagger документация|
|`http://127.0.0.1:8000/redoc/`|Redoc документация|
|`127.0.0.1:8000/api`|Base URL|
|`/comment/create/`|Создание комментария|
|`/post/`|Список статей|
|`/post/create/`|Создание статьи|
|`/post/{slug}/`|Просмотр конкретной статьи с комментариями|
|`/post/?search={текст поиска}`|Поиск статей по категориям и их заголовкам|
|`/post/?ordering={created_at/-created_at}`|Сортировка вывода статей по дате создания (по возрастанию/по убыванию)|
|`/post/?ordering={tags/-tags}`|Сортировка вывода статей по тегам (по возрастанию/по убыванию)|
|`/category/`|Просмотр списка категорий|
|`/category/create`|Создание категории|
|`/comment/create/`|Создание комментария (только для авторизованных пользователей)|

#### Дополнительно
Все запросы к базе данных, вызванные доступом к связанным объектам, оптимизированны с помощью select_related и prefetch_related.

#### Использовано:
- Python 3.9.5
- Django 3.2.7
- Django Rest Framework 3.12.4
